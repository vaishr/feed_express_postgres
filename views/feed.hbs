<!DOCTYPE html>
<head>
<link href="style.css" rel="stylesheet">
<meta charset ="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class = "container">
  <form action="/logout" method="POST">
    <img src = "/assets/btn_logout.svg" id="logoutBtn" style="z-index:100">
  </form>
  <div id="result"></div>
  <h3> Feed </h3>
  <div class="feed">
    {{#each feed}}
      <div class = "feedItem">
      user : {{user_id}} <br>
      message: {{feed_message}}
      time: {{created_at}}
      email: {{email}}
      </div>
    {{/each}}
  </div >
  <h3> New Feed </h3>
  <form action="/feed" method="POST">
    <input type="text" id="newFeedPost" placeholder="feedItem" name="feed_message">
    <button type="submit" onclick="addPost()">Submit</button>
  </form>
</div>
</body>
<script type="text/javascript">
  function addPost() {
    var newPost = $('#newFeedPost').value;
    request = $.ajax({
        url: "/feed",
        type: "post",
       data: {
        feed_message: newPost,
        user: currentUser
      }
    });
    request.done(function (response, textStatus, jqXHR){
        console.log("completed "+ response);
    });
    request.fail(function (){
       $("#result").html('There is error while submit');
     });
}
</script>